---
description: 
globs: 
alwaysApply: false
---
# Habby Email Agent å¼€å‘æŒ‡å—

æœ¬æ–‡æ¡£ç”¨äºæŒ‡å¯¼å¦‚ä½•åœ¨ `habby-email-agent` é¡¹ç›®ä¸­å¿«é€Ÿå¼€å‘ä¸€ä¸ªæ–° Agentï¼Œæ¶µç›–è®¾è®¡æµç¨‹ã€ç›®å½•ç»“æ„è¯´æ˜ä¸å¿«é€Ÿå¼€å‘æ–¹æ³•ã€‚

---

## âœ¨ Agent å¼€å‘äº”æ­¥æ³•ï¼ˆæ¨èæµç¨‹ï¼‰

1. **å®šä¹‰ Agent è§’è‰²ä¸ä½¿å‘½**  
   ä»¥ LLM ä¸ºæ ¸å¿ƒï¼Œæ˜ç¡®ï¼š
   - Agent çš„èŒè´£ã€èº«ä»½å®šä½ï¼ˆèƒ½åšä»€ä¹ˆ / ä¸åšä»€ä¹ˆï¼‰
   - å·¥ä½œæµç¨‹ï¼šä»¥ç”¨æˆ·ä¸ºå¯¼å‘çš„äº¤äº’æµç¨‹ï¼ˆå¦‚ï¼šæ¥æ”¶é‚®ä»¶ â†’ åˆ†æè¯·æ±‚ â†’ è°ƒç”¨å·¥å…· â†’ æ ¼å¼åŒ–å›å¤ï¼‰

2. **è§„åˆ’ Toolsï¼ˆå·¥å…·ï¼‰**
   - å°†å·¥ä½œæµç¨‹ä¸­æ¶‰åŠçš„å¯æ“ä½œåŠ¨ä½œæŠ½è±¡ä¸º Toolï¼ˆå³ LLM å¯è°ƒç”¨çš„å‡½æ•°ï¼‰
   - æ¯ä¸ª Tool æ˜ç¡®å®šä¹‰è¾“å…¥ / è¾“å‡ºï¼Œå…·å¤‡å‡½æ•°å¼å°è£…

3. **è§„åˆ’ Servicesï¼ˆä¸šåŠ¡æœåŠ¡ï¼‰**
   - ä¸ºæ¯ä¸ª Tool æä¾›åº•å±‚ä¸šåŠ¡é€»è¾‘æ”¯æŒï¼ˆè°ƒç”¨å¤–éƒ¨ APIã€DynamoDBã€S3 ç­‰ï¼‰
   - Service å±‚åº”å…·å¤‡æ¸…æ™°æ¥å£ä¸èŒè´£è¾¹ç•Œ

4. **è§„åˆ’ Habby API æ¥å£**
   - è‹¥æœåŠ¡ä¾èµ–å…¬å¸ APIï¼Œåˆ™å®šä¹‰æˆ–ç¡®è®¤ Habby API æ¥å£æ ¼å¼
   - å¯æ¨åŠ¨æ¥å£è§„èŒƒå¯¹é½ï¼ˆå¦‚ RESTfulã€é‰´æƒæ–¹å¼ã€é”™è¯¯ç å®šä¹‰ï¼‰

5. **ç¼–å†™ Prompt**
   - System Promptï¼šå®šä¹‰ Agent çš„èƒ½åŠ›è¾¹ç•Œå’Œè¡Œä¸ºè§„èŒƒ
   - User Promptï¼šç”¨äºå¼•å¯¼ç”¨æˆ·è¯·æ±‚ï¼ˆå¦‚é‚®ä»¶æ¨¡æ¿ã€ç»“æ„åŒ–æŒ‡ä»¤ç­‰ï¼‰
   - ä½¿ç”¨ `prompt_builder.py` ç»Ÿä¸€ç®¡ç†

---

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„è¯´æ˜

```plaintext
agents/email-agent/
â”œâ”€â”€ app.py                      # Lambda å…¥å£
â”œâ”€â”€ agent.py                    # Agent ä¸»ä½“ï¼Œå®šä¹‰ prompt + tool æ³¨å†Œ
â”œâ”€â”€ prompt_builder.py           # Prompt æ„å»ºå™¨
â”œâ”€â”€ tools_registry.py           # æ³¨å†Œå·¥å…·å‡½æ•°çš„åˆ—è¡¨
â”œâ”€â”€ config/                     # é…ç½®ä¸ç¯å¢ƒå˜é‡
â”‚   â””â”€â”€ settings.py
â”œâ”€â”€ tools/                      # å¯ä¾› LLM è°ƒç”¨çš„å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ lambda_client.py
â”œâ”€â”€ services/                   # ä¸šåŠ¡æœåŠ¡å±‚ï¼Œå°è£… API / ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ habby_api_user_service.py
â”‚   â”œâ”€â”€ introduction_service.py
â”‚   â””â”€â”€ user_service_dynamodb_backup.py
â”œâ”€â”€ clients/                    # å°è£…å¤–éƒ¨ç³»ç»Ÿè®¿é—®ï¼Œå¦‚ habby API å®¢æˆ·ç«¯
â”‚   â””â”€â”€ habby_api_client.py
â”œâ”€â”€ utils/                      # å…¬å…±å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ logger.py
â”‚   â”œâ”€â”€ secrets_manager.py
â”‚   â”œâ”€â”€ response_formatter.py
â”‚   â”œâ”€â”€ email_templates.py
â”‚   â”œâ”€â”€ environment.py
â”‚   â””â”€â”€ helpers.py
â”œâ”€â”€ tests/                      # æµ‹è¯•ä»£ç ï¼ˆå•å…ƒæµ‹è¯•ã€äº‹ä»¶æ¨¡æ‹Ÿã€è°ƒè¯•è„šæœ¬ï¼‰
â”‚   â”œâ”€â”€ events/
â”‚   â”œâ”€â”€ fixtures/
â”‚   â””â”€â”€ scripts/
â”œâ”€â”€ docs/                       # è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ examples/                   # ç¤ºä¾‹è¾“å…¥/è¾“å‡º
â”œâ”€â”€ requirements.txt            # ä¾èµ–åº“
â””â”€â”€ quick_test_result.json      # å¿«é€Ÿæµ‹è¯•ç»“æœï¼ˆå¯é€‰ï¼Œè°ƒè¯•ç”¨ï¼‰
